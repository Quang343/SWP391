
<!DOCTYPE html>
<!--<html lang="en" dir="ltr" xmlns:th="http://www.thymeleaf.org">-->
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6" lang="">
<head th:replace="BackEnd/fragments/Admin/head::head"></head>

<style>
    .add-user-hover:hover {
        background-color: #ddd;
    }

    .best-selling-table tbody tr td .product-detail-box h6, .best-product-box h6{
        margin-bottom: 10px;
        font-weight: bold;
        color: #000;
    }

    .best-selling-table tbody tr{
        transition: background-color .15s ease-in-out;
    }

    .best-selling-table tbody tr:hover{
        background-color: #ddd;
    }

    .best-selling-table tbody tr td{
        padding-left: 16px !important;
        padding-right: 16px !important;
    }

    .category-slider::after {
        content: "";
        display: block;
        height: 3px;
        background-color: #f5f5f5;
        margin-top: 10px;
    }

    .dashboard-category {
        border-bottom: 7px solid #f5f5f5;
        padding-bottom: 15px;
    }

</style>
<body>
<!-- tap on top start -->
<div class="tap-top">
    <span class="lnr lnr-chevron-up"></span>
</div>
<!-- tap on tap end -->

<!-- page-wrapper Start-->
<div class="page-wrapper compact-wrapper" id="pageWrapper">
    <!-- Page Header Start-->
    <div th:replace="BackEnd/fragments/Admin/header :: header"></div>

    <!-- Page Header Ends-->

    <!-- Page Body Start-->
    <div class="page-body-wrapper">
        <!-- Page Sidebar Start-->
        <div th:replace="BackEnd/fragments/Admin/sidebar::sidebar"></div>
        <!-- Page Sidebar Ends-->

        <!-- index body start -->
        <div class="page-body">
            <div class="container-fluid">
                <div class="row">
                    <!-- chart caard section start -->
                    <div class="col-sm-6 col-xxl-3 col-lg-6">
                        <div class="main-tiles border-5 border-0  card-hover card o-hidden">
                            <div class="custome-1-bg b-r-4 card-body">
                                <div class="media align-items-center static-top-widget">
                                    <div class="media-body p-0">
                                        <span class="m-0">Tổng doanh thu</span>
                                        <h4 class="mb-0 counter" th:text="${#numbers.formatInteger(totalRevenue, 0, 'POINT')} + '₫'">
                                            <span class="badge badge-light-primary grow">
                                                    <i data-feather="trending-up"></i>8.5%</span>
                                        </h4>
                                    </div>
                                    <div class="align-self-center text-center">
                                        <i class="ri-database-2-line"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xxl-3 col-lg-6">
                        <div class="main-tiles border-5 card-hover border-0 card o-hidden">
                            <div class="custome-2-bg b-r-4 card-body">
                                <div class="media static-top-widget">
                                    <div class="media-body p-0">
                                        <span class="m-0">Tổng số đơn hàng</span>
                                        <h4 class="mb-0 counter" th:text="${numberOfOrders}">
                                            <span class="badge badge-light-danger grow">
                                                    <i data-feather="trending-down"></i>8.5%</span>
                                        </h4>
                                    </div>
                                    <div class="align-self-center text-center">
                                        <i class="ri-shopping-bag-3-line"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xxl-3 col-lg-6">
                        <div class="main-tiles border-5 card-hover border-0  card o-hidden">
                            <div class="custome-3-bg b-r-4 card-body">
                                <div class="media static-top-widget">
                                    <div class="media-body p-0">
                                        <span class="m-0">Tổng số sản phẩm</span>
                                        <h4 class="mb-0 counter" th:text="${numberOfProducts}">
                                            <a th:href="@{/admin/add_product}" class="badge badge-light-secondary grow">
                                                ADD NEW</a>
                                        </h4>
                                    </div>

                                    <div class="align-self-center text-center">
                                        <i class="ri-chat-3-line"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xxl-3 col-lg-6">
                        <div class="main-tiles border-5 card-hover border-0 card o-hidden">
                            <div class="custome-4-bg b-r-4 card-body">
                                <div class="media static-top-widget">
                                    <div class="media-body p-0">
                                        <span class="m-0">Tổng khách hàng</span>
                                        <h4 class="mb-0 counter" th:text="${numberOfUsers}">
                                            <span class="badge badge-light-success grow">
                                                    <i data-feather="trending-down"></i>8.5%</span>
                                        </h4>
                                    </div>

                                    <div class="add-user-hover align-self-center text-center">
                                        <a th:href="@{/admin/add_user}">
                                            <i class="ri-user-add-line"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-lg-12 col-md-12">
                        <div class="card o-hidden card-hover">
                            <div class="card-header border-0 pb-1">
                                <div class="card-header-title p-0">
                                    <h4>Danh mục</h4>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="category-slider d-flex flex-nowrap overflow-auto gap-3">
                                    <div th:each="category : ${categories}" class="dashboard-category text-center">
                                        <img style="border-radius: 50%; width: 110px; height: 110px;" th:src="@{'/seller/' + ${category.imageUrl}}" class="img-fluid" alt="">
                                        <a href="javascript:void(0)" class="category-name">
                                            <h6 th:text="${category.name}">Vegetables & Fruit</h6>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- chart card section End -->


                    <!-- Earning chart star-->
                    <div class="col-xl-6">
                        <div class="card o-hidden card-hover">
                            <div class="card-header border-0 pb-1">
                                <div class="card-header-title">
                                    <h4>Báo cáo doanh thu</h4>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div id="report-chart"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Earning chart  end-->


                    <!-- Best Selling Product Start -->
                    <div class="col-xl-6 col-md-12">
                        <div class="card o-hidden card-hover">
                            <div class="card-header card-header-top card-header--2 px-0 pt-0">
                                <div class="card-header-title">
                                    <h4>Sản phẩm bán chạy nhất</h4>
                                </div>

<!--                                <div class="best-selling-box d-sm-flex d-none">-->
<!--                                    <span>Short By:</span>-->
<!--                                    <div class="dropdown">-->
<!--                                        <button class="btn p-0 dropdown-toggle" type="button"-->
<!--                                                id="dropdownMenuButton1" data-bs-toggle="dropdown"-->
<!--                                                data-bs-auto-close="true">Today</button>-->
<!--                                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">-->
<!--                                            <li><a class="dropdown-item" href="#">Action</a></li>-->
<!--                                            <li><a class="dropdown-item" href="#">Another action</a></li>-->
<!--                                            <li><a class="dropdown-item" href="#">Something else here</a></li>-->
<!--                                        </ul>-->
<!--                                    </div>-->
<!--                                </div>-->
                            </div>

                            <div class="card-body p-0">
                                <div>
                                    <div class="table-responsive">
                                        <table class="best-selling-table w-image
                                            w-image
                                            w-image table border-0">
                                            <tbody>
                                            <tr th:each="product: ${bestSeller}">
                                                <td>
                                                    <div class="best-product-box">
                                                        <div class="product-image">
                                                            <img th:src="@{'/seller/' + ${product.getImageUrl()}}"
                                                                 class="img-fluid" alt="Product">
                                                        </div>
                                                        <div class="product-name">
                                                            <h5 th:text="${product.getProductName()}">Aata Buscuit</h5>
                                                            <h6>26-08-2022</h6>
                                                        </div>
                                                    </div>
                                                </td>

                                                <td>
                                                    <div class="product-detail-box">
                                                        <h6>Giá bán (VNĐ)</h6>
                                                        <h5 th:text="${#numbers.formatInteger(product.price, 0, 'POINT')} + '₫'">$29.00</h5>
                                                    </div>
                                                </td>

                                                <td>
                                                    <div class="product-detail-box">
                                                        <h6>Số lượng đã bán</h6>
                                                        <h5 th:text="${product.getTotalSold()}">62</h5>
                                                    </div>
                                                </td>

                                                <td>
                                                    <div class="product-detail-box">
                                                        <h6>Số lượng tồn</h6>
                                                        <h5 th:text="${product.getTotalInStock()}">510</h5>
                                                    </div>
                                                </td>

                                                <!--                                                <td>-->
                                                <!--                                                    <div class="product-detail-box">-->
                                                <!--                                                        <h6>Amount</h6>-->
                                                <!--                                                        <h5>$1,798</h5>-->
                                                <!--                                                    </div>-->
                                                <!--                                                </td>-->
                                            </tr>

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Best Selling Product End -->


                    <!-- Recent orders start-->
                    <div class="col-xl-6">
                        <div class="card o-hidden card-hover">
                            <div class="card-header card-header-top card-header--2 px-0 pt-0">
                                <div class="card-header-title">
                                    <h4>Đơn hàng gần đây</h4>
                                </div>

<!--                                <div class="best-selling-box d-sm-flex d-none">-->
<!--                                    <span>Short By:</span>-->
<!--                                    <div class="dropdown">-->
<!--                                        <button class="btn p-0 dropdown-toggle" type="button"-->
<!--                                                id="dropdownMenuButton2" data-bs-toggle="dropdown"-->
<!--                                                data-bs-auto-close="true">Today</button>-->
<!--                                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton2">-->
<!--                                            <li><a class="dropdown-item" href="#">Action</a></li>-->
<!--                                            <li><a class="dropdown-item" href="#">Another action</a></li>-->
<!--                                            <li><a class="dropdown-item" href="#">Something else here</a></li>-->
<!--                                        </ul>-->
<!--                                    </div>-->
<!--                                </div>-->
                            </div>

                            <div class="card-body p-0">
                                <div>
                                    <div class="table-responsive">
                                        <table class="best-selling-table table border-0">
                                            <tbody>
                                            <tr th:each="order: ${orders}">
                                                <td>
                                                    <div class="best-product-box">
                                                        <div>
                                                            <h6>Mã đơn hàng</h6>
                                                            <h5 th:text="'#' + ${order.getOrderCode()}"></h5>
                                                        </div>
                                                    </div>
                                                </td>

                                                <td>
                                                    <div class="product-detail-box">
                                                        <h6>Ngày đặt</h6>
                                                        <h5 th:text="${#temporals.format(order.getOrderDate(), 'dd/MM/yyyy')}"></h5>
                                                    </div>
                                                </td>

                                                <td>
                                                    <div class="product-detail-box">
                                                        <h6>Số điện thoại</h6>
                                                        <h5 th:text="${order.phone}"></h5>
                                                    </div>
                                                </td>

                                                <td>
                                                    <div class="product-detail-box">
                                                        <h6>Trạng thái</h6>
                                                        <h5 th:text="${order.getStatus()}"></h5>
                                                    </div>
                                                </td>

                                                <td>
                                                    <div class="product-detail-box">
                                                        <h6>Tổng (VNĐ)</h6>
                                                        <h5 th:text="${#numbers.formatInteger(order.finalAmount, 0, 'POINT')} + '₫'"></h5>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Recent orders end-->

                    <!-- Earning chart star-->
                    <div class="col-xl-6">
                        <div class="card o-hidden card-hover">
                            <div class="card-header border-0 mb-0">
                                <div class="card-header-title">
                                    <h4>Earning</h4>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div id="bar-chart-earning"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Earning chart end-->


                    <!-- Transactions start-->
<!--                    <div class="col-xxl-4 col-md-6">-->
<!--                        <div class="card o-hidden card-hover">-->
<!--                            <div class="card-header border-0">-->
<!--                                <div class="card-header-title">-->
<!--                                    <h4>Transactions</h4>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            <div class="card-body pt-0">-->
<!--                                <div>-->
<!--                                    <div class="table-responsive">-->
<!--                                        <table class="user-table transactions-table table border-0">-->
<!--                                            <tbody>-->
<!--                                            <tr>-->
<!--                                                <td>-->
<!--                                                    <div class="transactions-icon">-->
<!--                                                        <i class="ri-shield-line"></i>-->
<!--                                                    </div>-->
<!--                                                    <div class="transactions-name">-->
<!--                                                        <h6>Wallets</h6>-->
<!--                                                        <p>Starbucks</p>-->
<!--                                                    </div>-->
<!--                                                </td>-->

<!--                                                <td class="lost">-$74</td>-->
<!--                                            </tr>-->
<!--                                            <tr>-->
<!--                                                <td class="td-color-1">-->
<!--                                                    <div class="transactions-icon">-->
<!--                                                        <i class="ri-check-line"></i>-->
<!--                                                    </div>-->
<!--                                                    <div class="transactions-name">-->
<!--                                                        <h6>Bank Transfer</h6>-->
<!--                                                        <p>Add Money</p>-->
<!--                                                    </div>-->
<!--                                                </td>-->

<!--                                                <td class="success">+$125</td>-->
<!--                                            </tr>-->
<!--                                            <tr>-->
<!--                                                <td class="td-color-2">-->
<!--                                                    <div class="transactions-icon">-->
<!--                                                        <i class="ri-exchange-dollar-line"></i>-->
<!--                                                    </div>-->
<!--                                                    <div class="transactions-name">-->
<!--                                                        <h6>Paypal</h6>-->
<!--                                                        <p>Add Money</p>-->
<!--                                                    </div>-->
<!--                                                </td>-->

<!--                                                <td class="lost">-$50</td>-->
<!--                                            </tr>-->
<!--                                            <tr>-->
<!--                                                <td class="td-color-3">-->
<!--                                                    <div class="transactions-icon">-->
<!--                                                        <i class="ri-bank-card-line"></i>-->
<!--                                                    </div>-->
<!--                                                    <div class="transactions-name">-->
<!--                                                        <h6>Mastercard</h6>-->
<!--                                                        <p>Ordered Food</p>-->
<!--                                                    </div>-->
<!--                                                </td>-->

<!--                                                <td class="lost">-$40</td>-->
<!--                                            </tr>-->
<!--                                            <tr>-->
<!--                                                <td class="td-color-4 pb-0">-->
<!--                                                    <div class="transactions-icon">-->
<!--                                                        <i class="ri-bar-chart-grouped-line"></i>-->
<!--                                                    </div>-->
<!--                                                    <div class="transactions-name">-->
<!--                                                        <h6>Transfer</h6>-->
<!--                                                        <p>Refund</p>-->
<!--                                                    </div>-->
<!--                                                </td>-->

<!--                                                <td class="success pb-0">+$90</td>-->
<!--                                            </tr>-->
<!--                                            </tbody>-->
<!--                                        </table>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
                    <!-- Transactions end-->

                    <!-- visitors chart start-->
<!--                    <div class="col-xxl-4 col-md-6">-->
<!--                        <div class="h-100">-->
<!--                            <div class="card o-hidden card-hover">-->
<!--                                <div class="card-header border-0">-->
<!--                                    <div class="d-flex align-items-center justify-content-between">-->
<!--                                        <div class="card-header-title">-->
<!--                                            <h4>Visitors</h4>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <div class="card-body pt-0">-->
<!--                                    <div class="pie-chart">-->
<!--                                        <div id="pie-chart-visitors"></div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
                    <!-- visitors chart end-->


                    <!-- To Do List start
                    <div class="col-xxl-4 col-md-6">
                        <div class="card o-hidden card-hover">
                            <div class="card-header border-0">
                                <div class="card-header-title">
                                    <h4>To Do List</h4>
                                </div>
                            </div>

                            <div class="card-body pt-0">
                                <ul class="to-do-list">
                                    <li class="to-do-item">
                                        <div class="form-check user-checkbox">
                                            <input class="checkbox_animated check-it" type="checkbox" value=""
                                                   id="flexCheckDefault">
                                        </div>
                                        <div class="to-do-list-name">
                                            <strong>Pick up kids from school</strong>
                                            <p>8 Hours</p>
                                        </div>
                                    </li>
                                    <li class="to-do-item">
                                        <div class="form-check user-checkbox">
                                            <input class="checkbox_animated check-it" type="checkbox" value=""
                                                   id="flexCheckDefault1">
                                        </div>
                                        <div class="to-do-list-name">
                                            <strong>Prepare or presentation.</strong>
                                            <p>8 Hours</p>
                                        </div>
                                    </li>
                                    <li class="to-do-item">
                                        <div class="form-check user-checkbox">
                                            <input class="checkbox_animated check-it" type="checkbox" value=""
                                                   id="flexCheckDefault2">
                                        </div>
                                        <div class="to-do-list-name">
                                            <strong>Create invoice</strong>
                                            <p>8 Hours</p>
                                        </div>
                                    </li>
                                    <li class="to-do-item">
                                        <div class="form-check user-checkbox">
                                            <input class="checkbox_animated check-it" type="checkbox" value=""
                                                   id="flexCheckDefault3">
                                        </div>
                                        <div class="to-do-list-name">
                                            <strong>Meeting with Alisa</strong>
                                            <p>8 Hours</p>
                                        </div>
                                    </li>

                                    <li class="to-do-item">
                                        <form class="row g-2">
                                            <div class="col-8">
                                                <input type="text" class="form-control" id="name"
                                                       placeholder="Enter Task Name">
                                            </div>
                                            <div class="col-4">
                                                <button type="submit" class="btn btn-primary w-100 h-100">Add
                                                    task</button>
                                            </div>
                                        </form>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    -->
                    <!-- To Do List end-->


                </div>
            </div>
            <!-- Container-fluid Ends-->

            <!-- footer start-->
            <div th:replace="BackEnd/fragments/Admin/footer :: footer"></div>
            <!-- footer End-->
        </div>
        <!-- index body end -->

    </div>
    <!-- Page Body End -->

</div>
<!-- page-wrapper End-->

<!-- Modal Start -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
    <div class="modal-dialog  modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                <h5 class="modal-title" id="staticBackdropLabel">Logging Out</h5>
                <p>Are you sure you want to log out?</p>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                <div class="button-box">
                    <button type="button" class="btn btn--no" data-bs-dismiss="modal">No</button>
                    <button type="button" th:onclick="|window.location='@{backend/login}'|" class="btn btn--yes btn-primary">Yes</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal End -->

<!-- latest js -->
<script th:src="@{/Backend/assets/js/jquery-3.6.0.min.js}"></script>

<!-- Bootstrap js -->
<script th:src="@{/Backend/assets/js/bootstrap/bootstrap.bundle.min.js}"></script>

<!-- feather icon js -->
<script th:src="@{/Backend/assets/js/icons/feather-icon/feather.min.js}"></script>
<script th:src="@{/Backend/assets/js/icons/feather-icon/feather-icon.js}"></script>

<!-- scrollbar simplebar js -->
<script th:src="@{/Backend/assets/js/scrollbar/simplebar.js}"></script>
<script th:src="@{/Backend/assets/js/scrollbar/custom.js}"></script>

<!-- Sidebar jquery -->
<script th:src="@{/Backend/assets/js/config.js}"></script>

<!-- tooltip init js -->
<script th:src="@{/Backend/assets/js/tooltip-init.js}"></script>

<!-- Plugins JS -->
<script th:src="@{/Backend/assets/js/sidebar-menu.js}"></script>
<script th:src="@{/Backend/assets/js/notify/bootstrap-notify.min.js}"></script>
<script th:src="@{/Backend/assets/js/notify/index.js}"></script>

<!-- Apexchar js -->
<script th:src="@{/Backend/assets/js/chart/apex-chart/apex-chart1.js}"></script>
<script th:src="@{/Backend/assets/js/chart/apex-chart/moment.min.js}"></script>
<script th:src="@{/Backend/assets/js/chart/apex-chart/apex-chart.js}"></script>
<script th:src="@{/Backend/assets/js/chart/apex-chart/stock-prices.js}"></script>
<script th:src="@{/Backend/assets/js/chart/apex-chart/chart-custom1.js}"></script>


<!-- slick slider js -->
<script th:src="@{/Backend/assets/js/slick.min.js}"></script>
<script th:src="@{/Backend/assets/js/custom-slick.js}"></script>

<!-- customizer js -->
<script th:src="@{/Backend/assets/js/customizer.js}"></script>

<!-- ratio js -->
<script th:src="@{/Backend/assets/js/ratio.js}"></script>

<!-- sidebar effect -->
<script th:src="@{/Backend/assets/js/sidebareffect.js}"></script>

<!-- Theme js -->
<script th:src="@{/Backend/assets/js/script.js}"></script>

<!-- Script -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1.5.0/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>

<!-- Toastr CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet"/>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Toastr JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<!-- Hidden messages -->
<div th:if="${errorMessage}" id="errorMessage" th:data-msg="${errorMessage}" hidden></div>
<div th:if="${successMessage}" id="successMessage" th:data-msg="${successMessage}" hidden></div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Toastr configuration (set before showing message)
        toastr.options = {
            "closeButton": true,
            "progressBar": true,
            "positionClass": "toast-top-right",
            "timeOut": "3000"
        };

        const errorDiv = document.getElementById("errorMessage");
        const successDiv = document.getElementById("successMessage");

        if (errorDiv && errorDiv.dataset.msg) {
            toastr.error(errorDiv.dataset.msg, 'Error');
        }

        if (successDiv && successDiv.dataset.msg) {
            toastr.success(successDiv.dataset.msg, 'Success');
        }
    });
</script>


<!--<script>-->
<!--    document.addEventListener("DOMContentLoaded", function () {-->
<!--        const toggle = document.getElementById("notificationToggle");-->
<!--        if (toggle) {-->
<!--            const socket = new SockJS('/AgriculturalWarehouseManagementApplication/ws');-->
<!--            const stompClient = Stomp.over(socket);-->

<!--            stompClient.connect({}, function () {-->
<!--                stompClient.subscribe('/topic/notifications', function (notification) {-->
<!--                    const data = JSON.parse(notification.body);-->
<!--                    toastr.info(data.content || "Thông báo mới", "Thông báo");-->

<!--                    // Load lại fragment header để cập nhật số lượng/thông báo-->
<!--                    $("#header").load("/AgriculturalWarehouseManagementApplication/admin/loadHeader");-->
<!--                });-->
<!--            });-->
<!--        }-->
<!--    });-->
<!--</script>-->

<!-- Script để kết nối WebSocket nếu có notification toggle -->
<!--<script>-->
<!--    document.addEventListener("DOMContentLoaded", function () {-->
<!--        const toggle = document.getElementById("notificationToggle");-->
<!--        if (toggle) {-->
<!--            const socket = new SockJS('/AgriculturalWarehouseManagementApplication/ws');-->
<!--            const stompClient = Stomp.over(socket);-->

<!--            stompClient.connect({}, function () {-->
<!--                stompClient.subscribe('/topic/notifications', function (notification) {-->
<!--                    const data = JSON.parse(notification.body);-->
<!--                    toastr.info(data.content || "Thông báo mới", "Thông báo");-->

<!--                    // Tải lại fragment header để cập nhật danh sách-->
<!--                    $("#header").load("/AgriculturalWarehouseManagementApplication/admin/header");-->
<!--                });-->
<!--            });-->
<!--        }-->
<!--    });-->
<!--</script>-->
<!--<script>-->
<!--    // Tùy chỉnh giao diện Toastr-->
<!--    toastr.options = {-->
<!--        closeButton: true,-->
<!--        progressBar: true,-->
<!--        positionClass: "toast-bottom-right",-->
<!--        timeOut: "4000",-->
<!--        preventDuplicates: true-->
<!--    };-->

<!--    let stompClient = null;-->

<!--    function connect() {-->
<!--        const socket = new SockJS('/AgriculturalWarehouseManagementApplication/ws');-->
<!--        stompClient = Stomp.over(socket);-->


<!--        stompClient.connect({}, function () {-->
<!--            stompClient.subscribe('/topic/notifications', function (notification) {-->
<!--                const data = JSON.parse(notification.body);-->
<!--                console.log("Received:", notification.body);-->
<!--                toastr.info(data.content || "Thông báo mới", "Thông báo");-->
<!--                setTimeout(function () {-->
<!--                    location.reload();-->
<!--                }, 3000);-->
<!--            });-->
<!--        });-->
<!--    }-->

<!--    // Chờ DOM load xong rồi mới connect-->
<!--    document.addEventListener("DOMContentLoaded", function () {-->
<!--        connect();-->
<!--    });-->
<!--</script>-->


</body>

</html>